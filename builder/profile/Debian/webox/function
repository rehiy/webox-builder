#!/bin/sh
#

wbx_app_run() {

    local WBX_APP=$1
    local WBX_ACTION=$2
    local WBX_SCRIPT=/srv/$1

    case $WBX_ACTION in
        prepare)
            WBX_SCRIPT=$WBX_SCRIPT/prepare
        ;;
        *)
            WBX_SCRIPT=$WBX_SCRIPT/service
        ;;
    esac

    [ -x $WBX_SCRIPT ] || chmod +x $WBX_SCRIPT
    $WBX_SCRIPT $WBX_ACTION

}

wbx_all_install() {

    local WBX_SCRIPT

    for WBX_SCRIPT in /srv/*/prepare; do
        [ -x $WBX_SCRIPT ] || chmod +x $WBX_SCRIPT
        echo "EXEC SCRIPT: $WBX_SCRIPT"
        $WBX_SCRIPT install
    done

}
