#!/bin/bash
#

if [ $UID -ne 0 ]; then
    echo "This script requires root privileges"
    exit 1
fi

#####################################################WEBOX-TARGET-VAR#

export htdoc=/srv/htdoc
export wbapp=/srv/app
export wblib=/srv/library
export webox=/srv/webox

[ -d ${wbapp} ] || mkdir -p ${wbapp}
[ -d ${wblib} ] || mkdir -p ${wblib}

##################################################WEBOX-BUILD-KIT-VAR#

export wkdir=$(pwd)

export wksrc=${wkdir}/source
export wkget=${wkdir}/storage

[ -d ${wksrc} ] || mkdir -p ${wksrc}
[ -d ${wkget} ] || mkdir -p ${wkget}

find ${wkget} -name "*" -type f -size 0c | xargs -n 1 rm -f

##############################################################RUNTIME#

export PATH=${wbapp}/bin:${wblib}/bin:$PATH

export CPATH=${wbapp}/include:${wblib}/include
export LIBRARY_PATH=${wbapp}/lib:${wblib}/lib
export LD_LIBRARY_PATH=$LIBRARY_PATH

mkdir -p ${wbapp}/include ${wblib}/include
mkdir -p ${wbapp}/lib ${wblib}/lib

case $(uname) in
    "Linux")
        wketc=${wkdir}/profile/Debian
    ;;
    "Darwin")
        wketc=${wkdir}/profile/MacOS
    ;;
    *)
        exit 10
esac

source ${wketc}.rtm
