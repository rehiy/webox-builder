APP_BIN_START='/srv/nginx/sbin/nginx'

APP_PID_FILE='/srv/nginx/var/run/nginx.pid'

APP_SIG_STOP='TERM'

APP_SIG_RELOAD='HUP'


app_once() {

    grep www-data /etc/group > /dev/null
    if [ $? -ne 0 ]; then
        groupadd www-data -g 33
    fi

    grep www-data /etc/passwd > /dev/null
    if [ $? -ne 0 ]; then
        useradd www-data -u 33 -g 33
        usermod www-data -d /srv/webroot -s /usr/sbin/nologin
    fi

    mkdir -p /srv/nginx/var/{run,log,tmp}
    chown -R www-data:www-data /srv/nginx/var/*

}

app_init() {

    if [ ! -d /srv/nginx/var/tmp/proxy_cache ]; then
        mkdir -p /srv/nginx/var/tmp/proxy_cache
        chown -R www-data:www-data /srv/nginx/var/tmp/proxy_cache
    fi

}
